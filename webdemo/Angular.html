<!DOCTYPE html>
<html ng-app="ptcApp">
<head>
    <title></title>
    <meta charset="utf-8" />
    <link href="Content/bootstrap.min.css" rel="stylesheet" />
    <script src="Scripts/jquery-1.9.1.min.js"></script>
    <script src="Scripts/bootstrap.min.js"></script>
    <script src="Scripts/angular.min.js"></script>
    <script src="Scripts/app.js"></script>
    <script src="Scripts/SessionLogic.js"></script>
</head>
<body ng-controller="PTCController">
    <div class="container">
        <div class="row">
            <div class="col-sm-6">
                <h2>Wils's Angular Company</h2>
            </div>
        </div>
        <div class="row">
            <table id="productTable" class="table table-bordered table-condensed table-striped">
                <thead>
                    <tr>
                        <th>Edit</th>
                        <th>Product Name</th>
                        <th>Introduction Date</th>
                        <th>URL</th>
                        <th>Delete</th>
                    </tr>
                </thead>



            </table>
        </div>
        <div class="row">
            <div class="col-sm-6">
                <button type="button" id="addButton" class="btn btn-primary" onclick="addClick();">Add Product</button>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-6">
                <div class="panel panel-primary" id="editPanel">
                    <div class="panel-heading">
                        Product Information
                    </div>
                    <div class="panel-body">
                        <div class="form-group">
                            <label for="productname">Product Name</label>
                            <input type="text" id="productname" class="form-control" />
                        </div>
                        <div class="form-group">
                            <label for="introdate">Introduction Date</label>
                            <input type="date" id="introdate" class="form-control" />
                        </div>
                        <div class="form-group">
                            <label for="url">URL</label>
                            <input type="url" id="url" class="form-control" />
                        </div>
                    </div>
                    <input type="hidden" id="productid" value="0" />
                    <div class="panel-footer">
                        <div class="row">
                            <div class="col-xs-12">
                                <button type="button" id="updateButton" class="btn btn-primary" onclick="updateClick();">Add</button>
                                <button type="button" id="cancelButton" class="btn btn-primary" onclick="cancelClick();">Cancel</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="text/javascript">

        // create an angular application scope
        (function () {
            'use strict';

            angular.module('ptcApp', [])
            .controller('PTCController', PTCController);

            function PTCController($scope) {

                var vm = $scope;

                vm.uiState = {};

                // private vars
                const pageMode = {
                    LIST: 'List',
                    EDIT: 'Edit',
                    ADD: 'Add',
                    EXCEPTION: 'Exception',
                    VALIDATION: 'Validation'
                };

                // create a uistate object literal
                function initUIState() {
                    return {
                        mode: pageMode.LIST,
                        isDetailAreaVisible: false,
                        isListAreaVisible: false,
                        isMessageAreaVisible: false,
                        isSearchAreaVisible: false,
                        messages: [] // empty collection
                    };
                }

                function setUIState(state) {

                    switch (state) {
                        case pageMode.LIST:
                            vm.uiState.isDetailAreaVisible = false;
                            vm.uiState.isListAreaVisible = true;
                            vm.uiState.isSearchAreaVisible = true;
                            vm.uiState.isMessageAreaVisible = false;
                            break;
                        case pageMode.ADD:
                            vm.uiState.isDetailAreaVisible = true;
                            vm.uiState.isListAreaVisible = false;
                            vm.uiState.isSearchAreaVisible = false;
                            vm.uiState.messages = [];
                            break;
                        case pageMode.EDIT:
                            vm.uiState.isDetailAreaVisible = true;
                            vm.uiState.isListAreaVisible = false;
                            vm.uiState.isSearchAreaVisible = false;
                            vm.uiState.messages = [];
                            break;
                        case pageMode.EXCEPTION:
                            vm.uiState.isMessageAreaVisible = true;
                            break;
                        case pageMode.VALIDATION:
                            vm.uiState.isMessageAreaVisible = true;
                            break;
                    }


                }

                vm.addClick = addClick();
                vm.cancelClick = cancelClick();
                vm.editClick = editClick();
                vm.deleteClick = deleteClick();
                vm.saveClick = saveClick();

                // CLICK EVENT HANDLERS

                function saveClick() {
                    // todo: save data here
                    setUIState(pageMode.LIST);
                }

                function addClick() {
                    setUIState(pageMode.ADD);
                }

                function cancelClick() {
                    setUIState(pageMode.LIST);
                }

                function deleteClick(id) {
                    // todo: delete data here
                }

                function editClick() {
                    // todo: get data here
                    setUIState(pageMode.EDIT);
                }
            }
        })();

    </script>
    <a href="Default.html">Pure TypeScript</a> | <a href="Angular.html">Angular Version</a>
</body>
</html>
